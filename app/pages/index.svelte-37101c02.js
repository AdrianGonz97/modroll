import{P as Xe,C as le,S as de,i as fe,s as he,e as w,t as A,k as V,D as ke,c as E,a as N,g as C,d as h,n as L,E as Ie,b as u,Q as Be,f as K,H as r,R as pe,T as Q,h as Z,U as De,I as X,V as Ue,W as it,X as ct,J as q,Y as Ve,F as ut,Z as dt,_ as Se,z as ft,l as Ze,j as _e,m as me,o as ve,p as ht,q as pt,x as ae,u as re,v as ge,r as _t,$ as mt,w as vt,a0 as gt,A as $e,a1 as xe,B as bt,a2 as yt,a3 as wt}from"../chunks/vendor-52449c46.js";import{a as et,b as tt,c as Et,d as Nt}from"../chunks/userstore-84659ed4.js";let Me=le({name:"None",num:0}),Le=le("None"),qe=le(["None","None"]),je=le(0),we=le(1),Ee=le(50),kt=Xe([we,Ee],([s,t])=>t-s+1);const It=Xe([we,Ee],([s,t])=>{const e=[];for(let l=s;l<=t;l++){const i={num:l,name:""};e.push(i)}return e}),$=le(new Map);{const s=localStorage.getItem("userList"),t=new Map(JSON.parse(s));$.set(t),$.subscribe(e=>localStorage.userList=JSON.stringify(Array.from(e.entries())))}function St(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,m,g,T,U,v,P,k,R;return{c(){t=w("div"),e=w("div"),l=A(s[1]),i=V(),n=w("div"),o=w("button"),c=ke("svg"),_=ke("path"),a=V(),d=w("div"),f=w("div"),y=w("input"),m=V(),g=w("input"),T=V(),U=w("button"),v=ke("svg"),P=ke("path"),this.h()},l(S){t=E(S,"DIV",{class:!0});var b=N(t);e=E(b,"DIV",{});var D=N(e);l=C(D,s[1]),D.forEach(h),i=L(b),n=E(b,"DIV",{class:!0});var M=N(n);o=E(M,"BUTTON",{"aria-label":!0,class:!0});var Y=N(o);c=Ie(Y,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var j=N(c);_=Ie(j,"path",{d:!0,class:!0}),N(_).forEach(h),j.forEach(h),Y.forEach(h),a=L(M),d=E(M,"DIV",{class:!0});var G=N(d);f=E(G,"DIV",{class:!0,style:!0});var W=N(f);y=E(W,"INPUT",{style:!0,"aria-hidden":!0,class:!0}),m=L(W),g=E(W,"INPUT",{type:!0,class:!0}),W.forEach(h),G.forEach(h),T=L(M),U=E(M,"BUTTON",{"aria-label":!0,class:!0});var z=N(U);v=Ie(z,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var J=N(v);P=Ie(J,"path",{d:!0,class:!0}),N(P).forEach(h),J.forEach(h),z.forEach(h),M.forEach(h),b.forEach(h),this.h()},h(){u(_,"d","M0,0.5 L1,0.5"),u(_,"class","svelte-1qdacbr"),u(c,"aria-hidden","true"),u(c,"viewBox","0 0 1 1"),u(c,"class","svelte-1qdacbr"),u(o,"aria-label","Decrease the counter by one"),u(o,"class","svelte-1qdacbr"),Be(y,"top","-100%"),u(y,"aria-hidden","true"),y.value=p=Math.floor(s[2]+1),u(y,"class","svelte-1qdacbr"),u(g,"type","number"),u(g,"class","svelte-1qdacbr"),u(f,"class","counter-digits svelte-1qdacbr"),Be(f,"transform","translate(0, "+100*s[4]+"%)"),u(d,"class","counter-viewport svelte-1qdacbr"),u(P,"d","M0,0.5 L1,0.5 M0.5,0 L0.5,1"),u(P,"class","svelte-1qdacbr"),u(v,"aria-hidden","true"),u(v,"viewBox","0 0 1 1"),u(v,"class","svelte-1qdacbr"),u(U,"aria-label","Increase the counter by one"),u(U,"class","svelte-1qdacbr"),u(n,"class","counter svelte-1qdacbr"),u(t,"class","container svelte-1qdacbr")},m(S,b){K(S,t,b),r(t,e),r(e,l),r(t,i),r(t,n),r(n,o),r(o,c),r(c,_),r(n,a),r(n,d),r(d,f),r(f,y),r(f,m),r(f,g),pe(g,s[3]),r(n,T),r(n,U),r(U,v),r(v,P),k||(R=[Q(o,"click",s[6]),Q(g,"input",s[7]),Q(U,"click",s[8])],k=!0)},p(S,[b]){b&2&&Z(l,S[1]),b&4&&p!==(p=Math.floor(S[2]+1))&&y.value!==p&&(y.value=p),b&8&&De(g.value)!==S[3]&&pe(g,S[3]),b&16&&Be(f,"transform","translate(0, "+100*S[4]+"%)")},i:X,o:X,d(S){S&&h(t),k=!1,Ue(R)}}}function Mt(s,t){return s%t}function Tt(s){return s-1<1?1:--s}function Rt(s){return s+1>999?999:++s}function Ot(s,t,e){let l,i,n,o=X,c=()=>(o(),o=it(_,m=>e(3,n=m)),_);s.$$.on_destroy.push(()=>o());let{count:_}=t;c();let{label:a}=t;const d=ct();q(s,d,m=>e(2,i=m));const f=()=>Ve(_,n=Tt(n),n);function y(){n=De(this.value),_.set(n)}const p=()=>Ve(_,n=Rt(n),n);return s.$$set=m=>{"count"in m&&c(e(0,_=m.count)),"label"in m&&e(1,a=m.label)},s.$$.update=()=>{s.$$.dirty&8&&d.set(n),s.$$.dirty&4&&e(4,l=Mt(i,1))},[_,a,i,n,l,d,f,y,p]}class st extends de{constructor(t){super();fe(this,t,Ot,St,he,{count:0,label:1})}}function At(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,m,g,T,U=!0,v,P;return{c(){t=w("div"),e=w("button"),l=A("CLICK ME TO ROLL"),n=V(),o=w("div"),c=w("span"),_=A("Drum Volume: "),a=w("b"),d=A(s[1]),f=A("%"),y=V(),p=w("input"),m=V(),g=w("audio"),this.h()},l(k){t=E(k,"DIV",{class:!0});var R=N(t);e=E(R,"BUTTON",{class:!0});var S=N(e);l=C(S,"CLICK ME TO ROLL"),S.forEach(h),n=L(R),o=E(R,"DIV",{class:!0});var b=N(o);c=E(b,"SPAN",{});var D=N(c);_=C(D,"Drum Volume: "),a=E(D,"B",{class:!0});var M=N(a);d=C(M,s[1]),f=C(M,"%"),M.forEach(h),D.forEach(h),y=L(b),p=E(b,"INPUT",{type:!0,min:!0,max:!0,class:!0}),b.forEach(h),m=L(R),g=E(R,"AUDIO",{src:!0}),N(g).forEach(h),R.forEach(h),this.h()},h(){e.disabled=i=!s[2],u(e,"class","svelte-14x8rgv"),u(a,"class","svelte-14x8rgv"),u(p,"type","range"),u(p,"min","0"),u(p,"max","100"),u(p,"class","svelte-14x8rgv"),u(o,"class","volume-container svelte-14x8rgv"),ut(g.src,T="drumroll.mp3")||u(g,"src",T),u(t,"class","roll-container svelte-14x8rgv")},m(k,R){K(k,t,R),r(t,e),r(e,l),r(t,n),r(t,o),r(o,c),r(c,_),r(c,a),r(a,d),r(a,f),r(o,y),r(o,p),pe(p,s[1]),r(t,m),r(t,g),s[7](g),v||(P=[Q(e,"click",s[3]),Q(p,"change",s[5]),Q(p,"input",s[5]),Q(p,"change",s[4]),Q(g,"play",s[6]),Q(g,"pause",s[6])],v=!0)},p(k,[R]){R&4&&i!==(i=!k[2])&&(e.disabled=i),R&2&&Z(d,k[1]),R&2&&pe(p,k[1]),R&4&&U!==(U=k[2])&&g[U?"pause":"play"]()},i:X,o:X,d(k){k&&h(t),s[7](null),v=!1,Ue(P)}}}function Ct(s,t,e){let l,i,n,o,c,_;q(s,qe,v=>e(8,l=v)),q(s,Le,v=>e(9,i=v)),q(s,$,v=>e(10,n=v)),q(s,we,v=>e(11,o=v)),q(s,Ee,v=>e(12,c=v)),q(s,je,v=>e(13,_=v));let a,d=50,f=!0;function y(){f&&(p(),a.play(),m(),Ve(je,_++,_),Me.set({name:"None",num:0}))}function p(){e(0,a.volume=d/100,a)}function m(){setTimeout(()=>{const v=Math.floor(Math.random()*(c-o+1)+o),P=n.get(v);P?(i!=P&&qe.set([i,l[0]]),Me.set({name:P,num:v}),Le.set(P)):Me.set({name:"None",num:v}),console.log(`Winner: ${v} - ${P}`)},3200)}function g(){d=De(this.value),e(1,d)}function T(){f=this.paused,e(2,f)}function U(v){dt[v?"unshift":"push"](()=>{a=v,e(0,a)})}return[a,d,f,y,p,g,T,U]}class Pt extends de{constructor(t){super();fe(this,t,Ct,At,he,{})}}function Bt(s){let t,e,l,i,n,o,c,_;return{c(){t=w("div"),e=w("span"),l=A(s[1]),i=V(),n=w("input"),this.h()},l(a){t=E(a,"DIV",{class:!0});var d=N(t);e=E(d,"SPAN",{class:!0});var f=N(e);l=C(f,s[1]),f.forEach(h),i=L(d),n=E(d,"INPUT",{"aria-label":!0,placeholder:!0,class:!0}),d.forEach(h),this.h()},h(){u(e,"class","svelte-1ytalfs"),u(n,"aria-label","Username"),u(n,"placeholder",""),u(n,"class","svelte-1ytalfs"),u(t,"class",o=""+(Se(s[2].num===s[1]?"winner":"name-container")+" svelte-1ytalfs"))},m(a,d){K(a,t,d),r(t,e),r(e,l),r(t,i),r(t,n),pe(n,s[0]),c||(_=[Q(n,"input",s[5]),Q(n,"keydown",s[3])],c=!0)},p(a,[d]){d&2&&Z(l,a[1]),d&1&&n.value!==a[0]&&pe(n,a[0]),d&6&&o!==(o=""+(Se(a[2].num===a[1]?"winner":"name-container")+" svelte-1ytalfs"))&&u(t,"class",o)},i:X,o:X,d(a){a&&h(t),c=!1,Ue(_)}}}function Dt(s,t,e){let l,i;q(s,$,a=>e(4,l=a)),q(s,Me,a=>e(2,i=a));let{num:n}=t,{name:o}=t;function c(a){(a.key==="Delete"||a.key==="Backspace")&&l.set(n,"")}ft(()=>{const a=l.get(n);a?e(0,o=a):$.set(l.set(n,""))});function _(){o=this.value,e(0,o)}return s.$$set=a=>{"num"in a&&e(1,n=a.num),"name"in a&&e(0,o=a.name)},s.$$.update=()=>{s.$$.dirty&19&&o&&l.set(n,o)},[o,n,i,c,l,_]}class Ut extends de{constructor(t){super();fe(this,t,Dt,Bt,he,{num:1,name:0})}}function nt(s,t,e){const l=s.slice();return l[10]=t[e],l}function lt(s,t,e){const l=s.slice();return l[13]=t[e],l}function at(s){let t,e,l=s[13]+"",i;return{c(){t=A("\xA0"),e=w("strong"),i=A(l),this.h()},l(n){t=C(n,"\xA0"),e=E(n,"STRONG",{class:!0});var o=N(e);i=C(o,l),o.forEach(h),this.h()},h(){u(e,"class","svelte-i420fk")},m(n,o){K(n,t,o),K(n,e,o),r(e,i)},p(n,o){o&8&&l!==(l=n[13]+"")&&Z(i,l)},d(n){n&&h(t),n&&h(e)}}}function rt(s,t){let e,l,i;const n=[t[10]];let o={};for(let c=0;c<n.length;c+=1)o=bt(o,n[c]);return l=new Ut({props:o}),{key:s,first:null,c(){e=Ze(),_e(l.$$.fragment),this.h()},l(c){e=Ze(),me(l.$$.fragment,c),this.h()},h(){this.first=e},m(c,_){K(c,e,_),ve(l,c,_),i=!0},p(c,_){t=c;const a=_&64?ht(n,[pt(t[10])]):{};l.$set(a)},i(c){i||(ae(l.$$.fragment,c),i=!0)},o(c){re(l.$$.fragment,c),i=!1},d(c){c&&h(e),ge(l,c)}}}function Vt(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,m,g,T,U,v,P,k,R,S,b,D,M,Y,j,G=(s[4].length!==0?s[4].join(", "):"None")+"",W,z,J,x,se,oe=(s[5]===-1||s[5]===null?"None":`${s[5]} bits`)+"",be,Te,ee,F=[],ze=new Map,te,Re,Je,ie=s[3],H=[];for(let I=0;I<ie.length;I+=1)H[I]=at(lt(s,ie,I));let ye=s[6];const Ge=I=>I[10].num;for(let I=0;I<ye.length;I+=1){let B=nt(s,ye,I),O=Ge(B);ze.set(O,F[I]=rt(O,B))}return{c(){t=w("div"),e=w("div"),l=w("span"),i=A("Roll "),n=w("strong"),o=A("#"),c=A(s[1]),_=V(),a=w("span"),d=A("Current Mod: "),f=w("strong"),y=A(s[2]),p=V(),m=w("span"),g=A("Past Winners: [");for(let I=0;I<H.length;I+=1)H[I].c();T=A(`
			]`),U=V(),v=w("button"),P=A("Clear All"),k=V(),R=w("div"),S=w("span"),b=A("Enter with:"),D=V(),M=w("span"),Y=A("Channel Reward: "),j=w("strong"),W=A(G),z=V(),J=w("span"),x=A("Bits (1 entry only): "),se=w("strong"),be=A(oe),Te=V(),ee=w("div");for(let I=0;I<F.length;I+=1)F[I].c();this.h()},l(I){t=E(I,"DIV",{class:!0});var B=N(t);e=E(B,"DIV",{class:!0});var O=N(e);l=E(O,"SPAN",{class:!0});var ce=N(l);i=C(ce,"Roll "),n=E(ce,"STRONG",{class:!0});var Oe=N(n);o=C(Oe,"#"),c=C(Oe,s[1]),Oe.forEach(h),ce.forEach(h),_=L(O),a=E(O,"SPAN",{class:!0});var Ae=N(a);d=C(Ae,"Current Mod: "),f=E(Ae,"STRONG",{class:!0});var We=N(f);y=C(We,s[2]),We.forEach(h),Ae.forEach(h),p=L(O),m=E(O,"SPAN",{class:!0});var Ne=N(m);g=C(Ne,"Past Winners: [");for(let ne=0;ne<H.length;ne+=1)H[ne].l(Ne);T=C(Ne,`
			]`),Ne.forEach(h),U=L(O),v=E(O,"BUTTON",{class:!0});var He=N(v);P=C(He,"Clear All"),He.forEach(h),k=L(O),R=E(O,"DIV",{class:!0});var ue=N(R);S=E(ue,"SPAN",{class:!0});var Ye=N(S);b=C(Ye,"Enter with:"),Ye.forEach(h),D=L(ue),M=E(ue,"SPAN",{class:!0});var Ce=N(M);Y=C(Ce,"Channel Reward: "),j=E(Ce,"STRONG",{class:!0});var Ke=N(j);W=C(Ke,G),Ke.forEach(h),Ce.forEach(h),z=L(ue),J=E(ue,"SPAN",{class:!0});var Pe=N(J);x=C(Pe,"Bits (1 entry only): "),se=E(Pe,"STRONG",{class:!0});var Fe=N(se);be=C(Fe,oe),Fe.forEach(h),Pe.forEach(h),ue.forEach(h),O.forEach(h),Te=L(B),ee=E(B,"DIV",{class:!0,style:!0});var Qe=N(ee);for(let ne=0;ne<F.length;ne+=1)F[ne].l(Qe);Qe.forEach(h),B.forEach(h),this.h()},h(){u(n,"class","svelte-i420fk"),u(l,"class","svelte-i420fk"),u(f,"class","svelte-i420fk"),u(a,"class","svelte-i420fk"),u(m,"class","svelte-i420fk"),u(v,"class","clear svelte-i420fk"),u(S,"class","tit svelte-i420fk"),u(j,"class","svelte-i420fk"),u(M,"class","instructions svelte-i420fk"),u(se,"class","svelte-i420fk"),u(J,"class","instructions svelte-i420fk"),u(R,"class","how svelte-i420fk"),u(e,"class","stats svelte-i420fk"),u(ee,"class","con svelte-i420fk"),u(ee,"style",s[0]),u(t,"class","container svelte-i420fk")},m(I,B){K(I,t,B),r(t,e),r(e,l),r(l,i),r(l,n),r(n,o),r(n,c),r(e,_),r(e,a),r(a,d),r(a,f),r(f,y),r(e,p),r(e,m),r(m,g);for(let O=0;O<H.length;O+=1)H[O].m(m,null);r(m,T),r(e,U),r(e,v),r(v,P),r(e,k),r(e,R),r(R,S),r(S,b),r(R,D),r(R,M),r(M,Y),r(M,j),r(j,W),r(R,z),r(R,J),r(J,x),r(J,se),r(se,be),r(t,Te),r(t,ee);for(let O=0;O<F.length;O+=1)F[O].m(ee,null);te=!0,Re||(Je=Q(v,"click",Lt),Re=!0)},p(I,[B]){if((!te||B&2)&&Z(c,I[1]),(!te||B&4)&&Z(y,I[2]),B&8){ie=I[3];let O;for(O=0;O<ie.length;O+=1){const ce=lt(I,ie,O);H[O]?H[O].p(ce,B):(H[O]=at(ce),H[O].c(),H[O].m(m,T))}for(;O<H.length;O+=1)H[O].d(1);H.length=ie.length}(!te||B&16)&&G!==(G=(I[4].length!==0?I[4].join(", "):"None")+"")&&Z(W,G),(!te||B&32)&&oe!==(oe=(I[5]===-1||I[5]===null?"None":`${I[5]} bits`)+"")&&Z(be,oe),B&64&&(ye=I[6],_t(),F=mt(F,B,Ge,1,I,ye,ze,ee,yt,rt,null,nt),vt()),(!te||B&1)&&u(ee,"style",I[0])},i(I){if(!te){for(let B=0;B<ye.length;B+=1)ae(F[B]);te=!0}},o(I){for(let B=0;B<F.length;B+=1)re(F[B]);te=!1},d(I){I&&h(t),gt(H,I);for(let B=0;B<F.length;B+=1)F[B].d();Re=!1,Je()}}}function Lt(){confirm("Are you really sure you want to clear ALL the NAMES?")&&confirm("OK, yeah. But seriously though, ARE YOU REALLY SURE?")&&(console.log("Clearing all names"),localStorage.removeItem("userList"),window.location.reload())}function qt(s,t,e){let l,i,n,o,c,_,a,d;q(s,kt,p=>e(7,l=p)),q(s,$,p=>e(9,i=p)),q(s,je,p=>e(1,n=p)),q(s,Le,p=>e(2,o=p)),q(s,qe,p=>e(3,c=p)),q(s,et,p=>e(4,_=p)),q(s,tt,p=>e(5,a=p)),q(s,It,p=>e(6,d=p));let f;$e(()=>{f=setInterval(()=>{$.set(i)},5e3)}),xe(()=>{clearInterval(f)});let y="";return s.$$.update=()=>{if(s.$$.dirty&128){const p=Math.ceil(l/5),m=Math.ceil(l/3);e(0,y=`--rows-lg: ${p}; --rows-md: ${m};`)}},[y,n,o,c,_,a,d,l]}class jt extends de{constructor(t){super();fe(this,t,qt,Vt,he,{})}}function zt(s){let t,e,l,i;return{c(){t=w("button"),e=A("Start"),this.h()},l(n){t=E(n,"BUTTON",{class:!0});var o=N(t);e=C(o,"Start"),o.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(n,o){K(n,t,o),r(t,e),l||(i=Q(t,"click",s[3]),l=!0)},p:X,d(n){n&&h(t),l=!1,i()}}}function Jt(s){let t,e,l,i;return{c(){t=w("button"),e=A("Stop"),this.h()},l(n){t=E(n,"BUTTON",{class:!0});var o=N(t);e=C(o,"Stop"),o.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(n,o){K(n,t,o),r(t,e),l||(i=Q(t,"click",s[4]),l=!0)},p:X,d(n){n&&h(t),l=!1,i()}}}function ot(s){let t,e,l,i,n,o,c,_=(s[0]===-1||s[0]===null?"No active":s[0])+"",a,d,f;function y(g,T){return g[1].length===0?Wt:Gt}let p=y(s),m=p(s);return{c(){t=w("div"),e=w("span"),l=A(`Reward Name:
				`),m.c(),i=V(),n=w("span"),o=A("Bit Amount: "),c=w("b"),a=A(_),d=A(" bits"),this.h()},l(g){t=E(g,"DIV",{class:!0});var T=N(t);e=E(T,"SPAN",{class:!0});var U=N(e);l=C(U,`Reward Name:
				`),m.l(U),U.forEach(h),i=L(T),n=E(T,"SPAN",{class:!0});var v=N(n);o=C(v,"Bit Amount: "),c=E(v,"B",{class:!0});var P=N(c);a=C(P,_),d=C(P," bits"),P.forEach(h),v.forEach(h),T.forEach(h),this.h()},h(){u(e,"class","txt svelte-zmiphn"),u(c,"class",f=""+(Se(s[0]===-1||s[0]===null?"inactive":"")+" svelte-zmiphn")),u(n,"class","txt svelte-zmiphn"),u(t,"class","watching-text svelte-zmiphn")},m(g,T){K(g,t,T),r(t,e),r(e,l),m.m(e,null),r(t,i),r(t,n),r(n,o),r(n,c),r(c,a),r(c,d)},p(g,T){p===(p=y(g))&&m?m.p(g,T):(m.d(1),m=p(g),m&&(m.c(),m.m(e,null))),T&1&&_!==(_=(g[0]===-1||g[0]===null?"No active":g[0])+"")&&Z(a,_),T&1&&f!==(f=""+(Se(g[0]===-1||g[0]===null?"inactive":"")+" svelte-zmiphn"))&&u(c,"class",f)},d(g){g&&h(t),m.d()}}}function Gt(s){let t,e=s[1].join(", ")+"",l;return{c(){t=w("b"),l=A(e),this.h()},l(i){t=E(i,"B",{class:!0});var n=N(t);l=C(n,e),n.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(i,n){K(i,t,n),r(t,l)},p(i,n){n&2&&e!==(e=i[1].join(", ")+"")&&Z(l,e)},d(i){i&&h(t)}}}function Wt(s){let t,e;return{c(){t=w("b"),e=A("No active rewards"),this.h()},l(l){t=E(l,"B",{class:!0});var i=N(t);e=C(i,"No active rewards"),i.forEach(h),this.h()},h(){u(t,"class","inactive svelte-zmiphn")},m(l,i){K(l,t,i),r(t,e)},p:X,d(l){l&&h(t)}}}function Ht(s){let t,e,l,i,n,o;function c(f,y){return f[2]?Jt:zt}let _=c(s),a=_(s),d=s[2]&&ot(s);return{c(){t=w("div"),e=w("div"),l=w("span"),i=A("Automate Modroll:"),n=V(),a.c(),o=V(),d&&d.c(),this.h()},l(f){t=E(f,"DIV",{class:!0});var y=N(t);e=E(y,"DIV",{class:!0});var p=N(e);l=E(p,"SPAN",{class:!0});var m=N(l);i=C(m,"Automate Modroll:"),m.forEach(h),n=L(p),a.l(p),p.forEach(h),o=L(y),d&&d.l(y),y.forEach(h),this.h()},h(){u(l,"class","svelte-zmiphn"),u(e,"class","btn-con svelte-zmiphn"),u(t,"class","container svelte-zmiphn")},m(f,y){K(f,t,y),r(t,e),r(e,l),r(l,i),r(e,n),a.m(e,null),r(t,o),d&&d.m(t,null)},p(f,[y]){_===(_=c(f))&&a?a.p(f,y):(a.d(1),a=_(f),a&&(a.c(),a.m(e,null))),f[2]?d?d.p(f,y):(d=ot(f),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i:X,o:X,d(f){f&&h(t),a.d(),d&&d.d()}}}async function Yt(s,t){(await fetch("/api/reward/refund",{method:"POST",body:JSON.stringify({id:s,rewardId:t})})).ok&&console.log("User has had their points refunded")}function Kt(s,t,e){let l,i,n,o,c,_;q(s,$,b=>e(13,l=b)),q(s,Ee,b=>e(14,i=b)),q(s,we,b=>e(15,n=b)),q(s,tt,b=>e(0,o=b)),q(s,Et,b=>e(5,c=b)),q(s,et,b=>e(1,_=b));let a,d,f,y,p,m,g,T=!1;$e(async()=>{try{const D=await(await fetch("/api/pubsub")).json();d=D.userId,f=D.token,d&&f&&(T=!0,y="wss://pubsub-edge.twitch.tv",p=[`channel-bits-events-v2.${d}`,`channel-points-channel-v1.${d}`])}catch(b){console.log(b)}});function U(){T||(alert("You must connect a twitch account before using this feature! This can be done in the settings page."),window.location.href="/settings"),S(!0),v()}function v(){e(2,a=new WebSocket(y)),e(2,a.onopen=b=>{const D={type:"LISTEN",data:{topics:p,auth_token:f}};a.send(JSON.stringify(D)),console.log("ws connected!"),m=P(a)},a),e(2,a.onmessage=b=>{const D=JSON.parse(b.data);if(console.log(D),D.type==="PONG")clearTimeout(g),m=P(a);else if(D.type==="MESSAGE"){const M=JSON.parse(D.data.message);if(console.log(M),M.type==="reward-redeemed"){const Y=M.data.redemption.user.display_name,j=M.data.redemption.user_input,G=M.data.redemption.reward.id,W=M.data.redemption.id,z=J=>J===G;c.some(z)&&(!isNaN(j)&&parseInt(j)>=n&&parseInt(j)<=i&&l.get(parseInt(j))===""?(console.log(`Setting user ${Y} to number ${j}`),$.set(l.set(parseInt(j),Y))):(console.log(`User ${Y} input: ${j} is invalid. Refunding.`),Yt(W,G)))}else if(M.message_type==="bits_event"){const{user_name:Y,bits_used:j,chat_message:G}=M.data;console.log(M.data),console.log(Y,j,G);const W=/([^ "]*\CHEER[^ "]*)/g,J=G.toUpperCase().replace(W,"").replace(/\s/g,"");let x=!1;l.forEach((se,oe,be)=>{se===Y+"-"&&(x=!0)}),o!==null&&o!==-1&&j>=o&&!isNaN(J)&&parseInt(J)>=n&&parseInt(J)<=i&&l.get(parseInt(J))===""&&!x?$.set(l.set(parseInt(J),Y+"-")):console.log("User input is invalid")}}},a),e(2,a.onerror=b=>{console.error("An error has occurred: ",b)},a),e(2,a.onclose=b=>{console.log("WS is now closed")},a)}function P(b){return setTimeout(()=>{const D={type:"PING"};b.send(JSON.stringify(D)),g=setTimeout(()=>{k()},1e4)},1e3*60*1+Math.floor(Math.random()*1e3*60*3))}function k(){console.log("Reconnecting ws...");const b={type:"RECONNECT"};a.send(JSON.stringify(b))}function R(){a&&(a.close(),clearTimeout(m),clearTimeout(g),S(!1),e(2,a=null))}async function S(b){try{const D=await fetch("/api/reward/get");if(D.ok){const M=await D.json();console.log(M);const G=M.rewards.map(z=>z.id).map(z=>({rewardId:z,isActive:b})).map(z=>fetch("/api/reward/update",{method:"POST",body:JSON.stringify(z)})),W=await Promise.all(G);if(W.every(z=>z.ok)){const z=W.map(x=>x.json()),J=await Promise.all(z);Nt.set(M.rewards.filter(x=>b))}}}catch{console.log("Cannot get user rewards")}}return xe(()=>{R()}),s.$$.update=()=>{s.$$.dirty&35&&console.log(_,c,o)},[o,_,a,U,R,c]}class Ft extends de{constructor(t){super();fe(this,t,Kt,Ht,he,{})}}function Qt(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,m,g,T,U,v,P;return o=new Ft({}),y=new st({props:{count:we,label:"Min Number"}}),m=new st({props:{count:Ee,label:"Max Number"}}),T=new Pt({}),v=new jt({}),{c(){t=V(),e=w("section"),l=w("h1"),i=A("Rolly for Le Mod"),n=V(),_e(o.$$.fragment),c=V(),_=w("h2"),a=A("Edit the numbers below to adjust the quantity"),d=V(),f=w("div"),_e(y.$$.fragment),p=V(),_e(m.$$.fragment),g=V(),_e(T.$$.fragment),U=V(),_e(v.$$.fragment),this.h()},l(k){wt('[data-svelte="svelte-1anpopb"]',document.head).forEach(h),t=L(k),e=E(k,"SECTION",{class:!0});var S=N(e);l=E(S,"H1",{class:!0});var b=N(l);i=C(b,"Rolly for Le Mod"),b.forEach(h),n=L(S),me(o.$$.fragment,S),c=L(S),_=E(S,"H2",{class:!0});var D=N(_);a=C(D,"Edit the numbers below to adjust the quantity"),D.forEach(h),d=L(S),f=E(S,"DIV",{class:!0});var M=N(f);me(y.$$.fragment,M),p=L(M),me(m.$$.fragment,M),M.forEach(h),g=L(S),me(T.$$.fragment,S),U=L(S),me(v.$$.fragment,S),S.forEach(h),this.h()},h(){document.title="Home",u(l,"class","svelte-1ibeh9m"),u(_,"class","svelte-1ibeh9m"),u(f,"class","counters svelte-1ibeh9m"),u(e,"class","svelte-1ibeh9m")},m(k,R){K(k,t,R),K(k,e,R),r(e,l),r(l,i),r(e,n),ve(o,e,null),r(e,c),r(e,_),r(_,a),r(e,d),r(e,f),ve(y,f,null),r(f,p),ve(m,f,null),r(e,g),ve(T,e,null),r(e,U),ve(v,e,null),P=!0},p:X,i(k){P||(ae(o.$$.fragment,k),ae(y.$$.fragment,k),ae(m.$$.fragment,k),ae(T.$$.fragment,k),ae(v.$$.fragment,k),P=!0)},o(k){re(o.$$.fragment,k),re(y.$$.fragment,k),re(m.$$.fragment,k),re(T.$$.fragment,k),re(v.$$.fragment,k),P=!1},d(k){k&&h(t),k&&h(e),ge(o),ge(y),ge(m),ge(T),ge(v)}}}const $t=!0;class xt extends de{constructor(t){super();fe(this,t,null,Qt,he,{})}}export{xt as default,$t as prerender};
