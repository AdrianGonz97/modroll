import{S as Ke,i as Qe,s as Ze,e as p,t as b,k as A,c as h,a as _,g as m,d as u,n as N,b as f,_ as Pe,f as R,H as s,I as ce,T as H,a4 as Ee,h as we,V as ht,R as le,U as je,r as _t,u as ge,w as vt,x as ue,J as bt,j as mt,m as wt,o as gt,p as Nt,q as qt,v as Et,l as yt,a0 as Ct,B as Pt,A as jt}from"../../chunks/vendor-52449c46.js";import{b as $e,d as Tt,u as St}from"../../chunks/userstore-84659ed4.js";async function It({fetch:i,session:e}){const{jwt:t,validUntil:a}=e,l=Date.now()<a;if(t&&l){console.log("User is already validated");let c,n=[];const o=[i("api/reward/get"),i("api/user")],r=await Promise.all(o);if(r.every(d=>d.ok)){const d=r.map(g=>g.json()),v=await Promise.all(d);n=v[0].rewards,c=v[1]}else if(r[1].ok){const d=await r[1].json();return{props:{isConnected:!0,rewards:null,userInfo:d}}}else return{props:{isConnected:!0,rewards:null,userInfo:null}};return{props:{isConnected:!0,rewards:n,userInfo:c}}}return console.log("Invalid jwt token"),{props:{isConnected:!1}}}function Bt(i){let e,t,a,l,c,n,o,r,d,v,g,S,q,T,L,j,E,I,O,X,k,P,D,Z;return{c(){e=p("div"),t=p("span"),a=p("b"),l=b("Inactive:"),c=A(),n=p("span"),o=p("b"),r=b("Title: "),d=b(i[0]),v=A(),g=p("span"),S=p("b"),q=b("Cost: "),T=b(i[2]),L=b(" channel points"),j=A(),E=p("div"),I=p("button"),O=b("Start Watching"),X=A(),k=p("button"),P=b("Delete Reward"),this.h()},l(y){e=h(y,"DIV",{class:!0});var C=_(e);t=h(C,"SPAN",{class:!0});var U=_(t);a=h(U,"B",{class:!0});var $=_(a);l=m($,"Inactive:"),$.forEach(u),U.forEach(u),c=N(C),n=h(C,"SPAN",{class:!0});var G=_(n);o=h(G,"B",{});var de=_(o);r=m(de,"Title: "),de.forEach(u),d=m(G,i[0]),G.forEach(u),v=N(C),g=h(C,"SPAN",{class:!0});var V=_(g);S=h(V,"B",{});var fe=_(S);q=m(fe,"Cost: "),fe.forEach(u),T=m(V,i[2]),L=m(V," channel points"),V.forEach(u),C.forEach(u),j=N(y),E=h(y,"DIV",{class:!0});var W=_(E);I=h(W,"BUTTON",{class:!0});var pe=_(I);O=m(pe,"Start Watching"),pe.forEach(u),X=N(W),k=h(W,"BUTTON",{class:!0});var F=_(k);P=m(F,"Delete Reward"),F.forEach(u),W.forEach(u),this.h()},h(){f(a,"class","inactive svelte-1mpo6sc"),f(t,"class","watching-text svelte-1mpo6sc"),f(n,"class","watching-text svelte-1mpo6sc"),f(g,"class","watching-text svelte-1mpo6sc"),f(e,"class","details svelte-1mpo6sc"),f(I,"class","svelte-1mpo6sc"),f(k,"class","svelte-1mpo6sc"),f(E,"class","btn-grp svelte-1mpo6sc")},m(y,C){R(y,e,C),s(e,t),s(t,a),s(a,l),s(e,c),s(e,n),s(n,o),s(o,r),s(n,d),s(e,v),s(e,g),s(g,S),s(S,q),s(g,T),s(g,L),R(y,j,C),R(y,E,C),s(E,I),s(I,O),s(E,X),s(E,k),s(k,P),D||(Z=[H(I,"click",Ee(i[5])),H(k,"click",Ee(i[3]))],D=!0)},p(y,C){C&1&&we(d,y[0]),C&4&&we(T,y[2])},d(y){y&&u(e),y&&u(j),y&&u(E),D=!1,ht(Z)}}}function Rt(i){let e,t,a,l,c,n,o,r,d,v,g,S,q,T,L,j,E,I,O,X;return{c(){e=p("div"),t=p("span"),a=p("b"),l=b("Active:"),c=A(),n=p("span"),o=p("b"),r=b("Title: "),d=b(i[0]),v=A(),g=p("span"),S=p("b"),q=b("Cost: "),T=b(i[2]),L=b(" channel points"),j=A(),E=p("button"),I=b("Stop Watching"),this.h()},l(k){e=h(k,"DIV",{class:!0});var P=_(e);t=h(P,"SPAN",{class:!0});var D=_(t);a=h(D,"B",{class:!0});var Z=_(a);l=m(Z,"Active:"),Z.forEach(u),D.forEach(u),c=N(P),n=h(P,"SPAN",{class:!0});var y=_(n);o=h(y,"B",{});var C=_(o);r=m(C,"Title: "),C.forEach(u),d=m(y,i[0]),y.forEach(u),v=N(P),g=h(P,"SPAN",{class:!0});var U=_(g);S=h(U,"B",{});var $=_(S);q=m($,"Cost: "),$.forEach(u),T=m(U,i[2]),L=m(U," channel points"),U.forEach(u),P.forEach(u),j=N(k),E=h(k,"BUTTON",{class:!0});var G=_(E);I=m(G,"Stop Watching"),G.forEach(u),this.h()},h(){f(a,"class","active svelte-1mpo6sc"),f(t,"class","watching-text svelte-1mpo6sc"),f(n,"class","watching-text svelte-1mpo6sc"),f(g,"class","watching-text svelte-1mpo6sc"),f(e,"class","details svelte-1mpo6sc"),f(E,"class","svelte-1mpo6sc")},m(k,P){R(k,e,P),s(e,t),s(t,a),s(a,l),s(e,c),s(e,n),s(n,o),s(o,r),s(n,d),s(e,v),s(e,g),s(g,S),s(S,q),s(g,T),s(g,L),R(k,j,P),R(k,E,P),s(E,I),O||(X=H(E,"click",Ee(i[4])),O=!0)},p(k,P){P&1&&we(d,k[0]),P&4&&we(T,k[2])},d(k){k&&u(e),k&&u(j),k&&u(E),O=!1,X()}}}function Dt(i){let e,t,a,l,c;function n(d,v){return d[1]?Rt:Bt}let o=n(i),r=o(i);return{c(){e=p("div"),t=p("span"),a=b("Channel Reward:"),l=A(),r.c(),this.h()},l(d){e=h(d,"DIV",{class:!0});var v=_(e);t=h(v,"SPAN",{class:!0});var g=_(t);a=m(g,"Channel Reward:"),g.forEach(u),l=N(v),r.l(v),v.forEach(u),this.h()},h(){f(t,"class","group-name svelte-1mpo6sc"),f(e,"class",c=""+(Pe(`form-group ${i[1]?"active-group":""}`)+" svelte-1mpo6sc"))},m(d,v){R(d,e,v),s(e,t),s(t,a),s(e,l),r.m(e,null)},p(d,[v]){o===(o=n(d))&&r?r.p(d,v):(r.d(1),r=o(d),r&&(r.c(),r.m(e,null))),v&2&&c!==(c=""+(Pe(`form-group ${d[1]?"active-group":""}`)+" svelte-1mpo6sc"))&&f(e,"class",c)},i:ce,o:ce,d(d){d&&u(e),r.d()}}}function Ot(i,e,t){let{title:a}=e,{isActive:l}=e,{id:c}=e,{cost:n}=e;async function o(){confirm("Are you sure you want to delete this reward?")&&(console.log("Deleting reward"),await fetch("/api/reward/delete",{method:"POST",body:JSON.stringify({id:c})}),window.location.reload())}async function r(){console.log(`Deactivating reward ${a}`);const v={isActive:!1,rewardId:c};await fetch("/api/reward/update",{method:"POST",body:JSON.stringify(v)}),window.location.reload()}async function d(){console.log(`Activating reward ${a}`);const v={isActive:!0,rewardId:c};await fetch("/api/reward/update",{method:"POST",body:JSON.stringify(v)}),window.location.reload()}return i.$$set=v=>{"title"in v&&t(0,a=v.title),"isActive"in v&&t(1,l=v.isActive),"id"in v&&t(6,c=v.id),"cost"in v&&t(2,n=v.cost)},[a,l,n,o,r,d,c]}class Ut extends Ke{constructor(e){super();Qe(this,e,Ot,Dt,Ze,{title:0,isActive:1,id:6,cost:2})}}function kt(i,e,t){const a=i.slice();return a[13]=e[t],a}function Vt(i){let e,t,a;return{c(){e=p("div"),t=p("span"),a=b(`You are not able to use any channel point rewards. Only
						affiliates and partners are able to use this feature.`),this.h()},l(l){e=h(l,"DIV",{class:!0});var c=_(e);t=h(c,"SPAN",{class:!0});var n=_(t);a=m(n,`You are not able to use any channel point rewards. Only
						affiliates and partners are able to use this feature.`),n.forEach(u),c.forEach(u),this.h()},h(){f(t,"class","watching-text svelte-bujqr"),f(e,"class","form-group svelte-bujqr")},m(l,c){R(l,e,c),s(e,t),s(t,a)},p:ce,i:ce,o:ce,d(l){l&&u(e)}}}function Lt(i){let e,t,a=i[0],l=[];for(let n=0;n<a.length;n+=1)l[n]=At(kt(i,a,n));const c=n=>ge(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=yt()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=yt()},m(n,o){for(let r=0;r<l.length;r+=1)l[r].m(n,o);R(n,e,o),t=!0},p(n,o){if(o&1){a=n[0];let r;for(r=0;r<a.length;r+=1){const d=kt(n,a,r);l[r]?(l[r].p(d,o),ue(l[r],1)):(l[r]=At(d),l[r].c(),ue(l[r],1),l[r].m(e.parentNode,e))}for(_t(),r=a.length;r<l.length;r+=1)c(r);vt()}},i(n){if(!t){for(let o=0;o<a.length;o+=1)ue(l[o]);t=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)ge(l[o]);t=!1},d(n){Ct(l,n),n&&u(e)}}}function At(i){let e,t;const a=[i[13]];let l={};for(let c=0;c<a.length;c+=1)l=Pt(l,a[c]);return e=new Ut({props:l}),{c(){mt(e.$$.fragment)},l(c){wt(e.$$.fragment,c)},m(c,n){gt(e,c,n),t=!0},p(c,n){const o=n&1?Nt(a,[qt(c[13])]):{};e.$set(o)},i(c){t||(ue(e.$$.fragment,c),t=!0)},o(c){ge(e.$$.fragment,c),t=!1},d(c){Et(e,c)}}}function Ft(i){let e,t;return{c(){e=p("span"),t=b("Not listening for bits"),this.h()},l(a){e=h(a,"SPAN",{class:!0});var l=_(e);t=m(l,"Not listening for bits"),l.forEach(u),this.h()},h(){f(e,"class","watching-text svelte-bujqr")},m(a,l){R(a,e,l),s(e,t)},p:ce,d(a){a&&u(e)}}}function Wt(i){let e,t,a;return{c(){e=p("span"),t=b(i[5]),a=b(" bits"),this.h()},l(l){e=h(l,"SPAN",{class:!0});var c=_(e);t=m(c,i[5]),a=m(c," bits"),c.forEach(u),this.h()},h(){f(e,"class","watching-text svelte-bujqr")},m(l,c){R(l,e,c),s(e,t),s(e,a)},p(l,c){c&32&&we(t,l[5])},d(l){l&&u(e)}}}function Jt(i){let e,t,a,l,c,n,o,r,d,v,g,S,q,T,L,j,E,I,O,X,k,P,D,Z,y,C,U,$,G,de,V,fe,W,pe,F,Te,ne,Ie,Be,re,J,M,Re,K,he,De,Oe,oe,Ue,x,Ve,ie,Le,Fe,Y,_e,We,Je,ye,ee,Me,Se,ke,ve,Ye,xe;const et=[Lt,Vt],te=[];function tt(w,B){return w[0]?0:1}J=tt(i),M=te[J]=et[J](i);function st(w,B){return w[5]&&w[5]>-1?Wt:Ft}let Ae=st(i),z=Ae(i);return{c(){e=p("div"),t=p("div"),a=p("span"),l=b("Fields labeled with "),c=p("span"),n=b("*"),o=b(" are required."),r=A(),d=p("span"),v=b("Created Rewards and Saved Settings"),g=A(),S=p("form"),q=p("div"),T=p("span"),L=b("Channel Point Reward:"),j=A(),E=p("label"),I=p("span"),O=p("span"),X=b("*"),k=b(" Reward Name:"),P=A(),D=p("input"),Z=A(),y=p("label"),C=p("span"),U=p("span"),$=b("*"),G=b(" Point Cost:"),de=A(),V=p("input"),fe=A(),W=p("label"),pe=b(`Description
				`),F=p("textarea"),Te=A(),ne=p("button"),Ie=b("Create Reward"),Be=A(),re=p("div"),M.c(),Re=A(),K=p("div"),he=p("span"),De=b("Bits:"),Oe=A(),oe=p("label"),Ue=b(`Minimum Cost:
				`),x=p("input"),Ve=A(),ie=p("button"),Le=b("Save Amount"),Fe=A(),Y=p("div"),_e=p("span"),We=b("Currently Watching Bits:"),Je=A(),z.c(),ye=A(),ee=p("button"),Me=b("Stop Listening"),this.h()},l(w){e=h(w,"DIV",{class:!0});var B=_(e);t=h(B,"DIV",{class:!0});var se=_(t);a=h(se,"SPAN",{class:!0});var Ne=_(a);l=m(Ne,"Fields labeled with "),c=h(Ne,"SPAN",{class:!0});var at=_(c);n=m(at,"*"),at.forEach(u),o=m(Ne," are required."),Ne.forEach(u),r=N(se),d=h(se,"SPAN",{class:!0});var lt=_(d);v=m(lt,"Created Rewards and Saved Settings"),lt.forEach(u),se.forEach(u),g=N(B),S=h(B,"FORM",{class:!0});var ae=_(S);q=h(ae,"DIV",{class:!0});var Q=_(q);T=h(Q,"SPAN",{class:!0});var nt=_(T);L=m(nt,"Channel Point Reward:"),nt.forEach(u),j=N(Q),E=h(Q,"LABEL",{class:!0});var qe=_(E);I=h(qe,"SPAN",{});var ze=_(I);O=h(ze,"SPAN",{class:!0});var rt=_(O);X=m(rt,"*"),rt.forEach(u),k=m(ze," Reward Name:"),ze.forEach(u),P=N(qe),D=h(qe,"INPUT",{type:!0,placeholder:!0}),qe.forEach(u),Z=N(Q),y=h(Q,"LABEL",{class:!0});var Ce=_(y);C=h(Ce,"SPAN",{});var He=_(C);U=h(He,"SPAN",{class:!0});var ot=_(U);$=m(ot,"*"),ot.forEach(u),G=m(He," Point Cost:"),He.forEach(u),de=N(Ce),V=h(Ce,"INPUT",{type:!0,placeholder:!0}),Ce.forEach(u),fe=N(Q),W=h(Q,"LABEL",{class:!0});var Xe=_(W);pe=m(Xe,`Description
				`),F=h(Xe,"TEXTAREA",{type:!0,placeholder:!0,class:!0}),_(F).forEach(u),Xe.forEach(u),Te=N(Q),ne=h(Q,"BUTTON",{class:!0});var it=_(ne);Ie=m(it,"Create Reward"),it.forEach(u),Q.forEach(u),Be=N(ae),re=h(ae,"DIV",{class:!0});var ct=_(re);M.l(ct),ct.forEach(u),Re=N(ae),K=h(ae,"DIV",{class:!0});var be=_(K);he=h(be,"SPAN",{class:!0});var ut=_(he);De=m(ut,"Bits:"),ut.forEach(u),Oe=N(be),oe=h(be,"LABEL",{class:!0});var Ge=_(oe);Ue=m(Ge,`Minimum Cost:
				`),x=h(Ge,"INPUT",{type:!0,placeholder:!0}),Ge.forEach(u),Ve=N(be),ie=h(be,"BUTTON",{class:!0});var dt=_(ie);Le=m(dt,"Save Amount"),dt.forEach(u),be.forEach(u),Fe=N(ae),Y=h(ae,"DIV",{class:!0});var me=_(Y);_e=h(me,"SPAN",{class:!0});var ft=_(_e);We=m(ft,"Currently Watching Bits:"),ft.forEach(u),Je=N(me),z.l(me),ye=N(me),ee=h(me,"BUTTON",{class:!0});var pt=_(ee);Me=m(pt,"Stop Listening"),pt.forEach(u),me.forEach(u),ae.forEach(u),B.forEach(u),this.h()},h(){f(c,"class","required svelte-bujqr"),f(a,"class","warning svelte-bujqr"),f(d,"class","warning svelte-bujqr"),f(t,"class","title-container svelte-bujqr"),f(T,"class","group-name svelte-bujqr"),f(O,"class","required svelte-bujqr"),f(D,"type","text"),f(D,"placeholder","ex. Modroll"),f(E,"class","svelte-bujqr"),f(U,"class","required svelte-bujqr"),f(V,"type","number"),f(V,"placeholder","ex. 50000"),f(y,"class","svelte-bujqr"),f(F,"type","text"),f(F,"placeholder","ex. Pick a number between 1-50 for a chance of mod"),f(F,"class","svelte-bujqr"),f(W,"class","svelte-bujqr"),f(ne,"class","svelte-bujqr"),f(q,"class","form-group svelte-bujqr"),f(re,"class","rewards svelte-bujqr"),f(he,"class","group-name svelte-bujqr"),f(x,"type","number"),f(x,"placeholder","ex. 500"),f(oe,"class","svelte-bujqr"),f(ie,"class","svelte-bujqr"),f(K,"class","form-group svelte-bujqr"),f(_e,"class","group-name svelte-bujqr"),ee.disabled=Se=i[5]===-1||i[5]===null,f(ee,"class","svelte-bujqr"),f(Y,"class",ke=""+(Pe(`form-group ${i[5]===-1||i[5]===null?"inactive":"active"}`)+" svelte-bujqr")),f(S,"class","svelte-bujqr"),f(e,"class","settings-container svelte-bujqr")},m(w,B){R(w,e,B),s(e,t),s(t,a),s(a,l),s(a,c),s(c,n),s(a,o),s(t,r),s(t,d),s(d,v),s(e,g),s(e,S),s(S,q),s(q,T),s(T,L),s(q,j),s(q,E),s(E,I),s(I,O),s(O,X),s(I,k),s(E,P),s(E,D),le(D,i[1]),s(q,Z),s(q,y),s(y,C),s(C,U),s(U,$),s(C,G),s(y,de),s(y,V),le(V,i[2]),s(q,fe),s(q,W),s(W,pe),s(W,F),le(F,i[3]),s(q,Te),s(q,ne),s(ne,Ie),s(S,Be),s(S,re),te[J].m(re,null),s(S,Re),s(S,K),s(K,he),s(he,De),s(K,Oe),s(K,oe),s(oe,Ue),s(oe,x),le(x,i[4]),s(K,Ve),s(K,ie),s(ie,Le),s(S,Fe),s(S,Y),s(Y,_e),s(_e,We),s(Y,Je),z.m(Y,null),s(Y,ye),s(Y,ee),s(ee,Me),ve=!0,Ye||(xe=[H(D,"input",i[9]),H(V,"input",i[10]),H(F,"input",i[11]),H(ne,"click",Ee(i[6])),H(x,"input",i[12]),H(ie,"click",Ee(i[7])),H(ee,"click",i[8])],Ye=!0)},p(w,[B]){B&2&&D.value!==w[1]&&le(D,w[1]),B&4&&je(V.value)!==w[2]&&le(V,w[2]),B&8&&le(F,w[3]);let se=J;J=tt(w),J===se?te[J].p(w,B):(_t(),ge(te[se],1,1,()=>{te[se]=null}),vt(),M=te[J],M?M.p(w,B):(M=te[J]=et[J](w),M.c()),ue(M,1),M.m(re,null)),B&16&&je(x.value)!==w[4]&&le(x,w[4]),Ae===(Ae=st(w))&&z?z.p(w,B):(z.d(1),z=Ae(w),z&&(z.c(),z.m(Y,ye))),(!ve||B&32&&Se!==(Se=w[5]===-1||w[5]===null))&&(ee.disabled=Se),(!ve||B&32&&ke!==(ke=""+(Pe(`form-group ${w[5]===-1||w[5]===null?"inactive":"active"}`)+" svelte-bujqr")))&&f(Y,"class",ke)},i(w){ve||(ue(M),ve=!0)},o(w){ge(M),ve=!1},d(w){w&&u(e),te[J].d(),z.d(),Ye=!1,ht(xe)}}}function Mt(i,e,t){let a;bt(i,$e,j=>t(5,a=j));let{rewards:l}=e,c,n,o,r;async function d(){c&&n?(await fetch("/api/reward/create",{method:"POST",body:JSON.stringify({title:c,cost:n,prompt:o})}),window.location.reload()):alert("Fields 'Reward Name' and 'Point Cost' are required!")}function v(){$e.set(r),localStorage.set("bitAmount",a)}function g(){$e.set(-1)}function S(){c=this.value,t(1,c)}function q(){n=je(this.value),t(2,n)}function T(){o=this.value,t(3,o)}function L(){r=je(this.value),t(4,r)}return i.$$set=j=>{"rewards"in j&&t(0,l=j.rewards)},i.$$.update=()=>{i.$$.dirty&1&&l&&Tt.set(l.filter(j=>j.isActive))},[l,c,n,o,r,a,d,v,g,S,q,T,L]}class Yt extends Ke{constructor(e){super();Qe(this,e,Mt,Jt,Ze,{rewards:0})}}function zt(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e=new Uint8Array(40);return window.crypto.getRandomValues(e),e=e.map(a=>i.charCodeAt(a%i.length)),String.fromCharCode.apply(null,e)}function Ht(i){let e,t;return{c(){e=p("a"),t=b("Connect to Twitch"),this.h()},l(a){e=h(a,"A",{class:!0,href:!0});var l=_(e);t=m(l,"Connect to Twitch"),l.forEach(u),this.h()},h(){f(e,"class","connection svelte-lk3pac"),f(e,"href",i[2])},m(a,l){R(a,e,l),s(e,t)},p(a,l){l&4&&f(e,"href",a[2])},d(a){a&&u(e)}}}function Xt(i){let e,t,a,l,c;function n(d,v){return d[3].displayName?Kt:Gt}let o=n(i),r=o(i);return{c(){r.c(),e=A(),t=p("button"),a=b("Disconnect from Twitch"),this.h()},l(d){r.l(d),e=N(d),t=h(d,"BUTTON",{class:!0});var v=_(t);a=m(v,"Disconnect from Twitch"),v.forEach(u),this.h()},h(){f(t,"class","svelte-lk3pac")},m(d,v){r.m(d,v),R(d,e,v),R(d,t,v),s(t,a),l||(c=H(t,"click",Zt),l=!0)},p(d,v){o===(o=n(d))&&r?r.p(d,v):(r.d(1),r=o(d),r&&(r.c(),r.m(e.parentNode,e)))},d(d){r.d(d),d&&u(e),d&&u(t),l=!1,c()}}}function Gt(i){let e,t;return{c(){e=p("span"),t=b("..."),this.h()},l(a){e=h(a,"SPAN",{class:!0});var l=_(e);t=m(l,"..."),l.forEach(u),this.h()},h(){f(e,"class","connection svelte-lk3pac")},m(a,l){R(a,e,l),s(e,t)},p:ce,d(a){a&&u(e)}}}function Kt(i){let e,t,a,l=i[3].displayName+"",c;return{c(){e=p("span"),t=b("Connected as: "),a=p("b"),c=b(l),this.h()},l(n){e=h(n,"SPAN",{class:!0});var o=_(e);t=m(o,"Connected as: "),a=h(o,"B",{class:!0});var r=_(a);c=m(r,l),r.forEach(u),o.forEach(u),this.h()},h(){f(a,"class","svelte-lk3pac"),f(e,"class","connection svelte-lk3pac")},m(n,o){R(n,e,o),s(e,t),s(e,a),s(a,c)},p(n,o){o&8&&l!==(l=n[3].displayName+"")&&we(c,l)},d(n){n&&u(e)}}}function Qt(i){let e,t,a;function l(o,r){return o[0]?Xt:Ht}let c=l(i),n=c(i);return t=new Yt({props:{rewards:i[1]}}),{c(){n.c(),e=A(),mt(t.$$.fragment)},l(o){n.l(o),e=N(o),wt(t.$$.fragment,o)},m(o,r){n.m(o,r),R(o,e,r),gt(t,o,r),a=!0},p(o,[r]){c===(c=l(o))&&n?n.p(o,r):(n.d(1),n=c(o),n&&(n.c(),n.m(e.parentNode,e)));const d={};r&2&&(d.rewards=o[1]),t.$set(d)},i(o){a||(ue(t.$$.fragment,o),a=!0)},o(o){ge(t.$$.fragment,o),a=!1},d(o){n.d(o),o&&u(e),Et(t,o)}}}const ts=It;async function Zt(){const i=await fetch("/api/oauth/revoke",{method:"POST"});i.ok&&console.log(await i.json()),localStorage.clear(),window.location.reload()}function $t(i,e,t){let a;bt(i,St,r=>t(3,a=r));let{userInfo:l}=e,{isConnected:c}=e,{rewards:n=[]}=e,o;return jt(()=>{const r=window.location.host;let d=zt();localStorage.setItem("state",d),t(2,o=`https://id.twitch.tv/oauth2/authorize?client_id=63qvaq2ihoklqle1qc96gqa8290su5&redirect_uri=https://${r}/login&response_type=code&scope=bits:read+channel:manage:redemptions+channel:read:redemptions+user:read:email&force_verify=true&state=${d}`),St.set(l)}),i.$$set=r=>{"userInfo"in r&&t(4,l=r.userInfo),"isConnected"in r&&t(0,c=r.isConnected),"rewards"in r&&t(1,n=r.rewards)},[c,n,o,a,l]}class ss extends Ke{constructor(e){super();Qe(this,e,$t,Qt,Ze,{userInfo:4,isConnected:0,rewards:1})}}export{ss as default,ts as load};
