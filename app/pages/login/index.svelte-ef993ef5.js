import{S,i as H,s as P,e as f,t as u,k as b,c as _,a as d,g as m,d as n,n as g,b as p,f as h,H as y,l as k,I as v,J as x,A as E}from"../../chunks/vendor-52449c46.js";import{p as j}from"../../chunks/stores-29330a01.js";function q(c){let e,l;return{c(){e=f("h2"),l=u("Connected!"),this.h()},l(i){e=_(i,"H2",{class:!0});var a=d(e);l=m(a,"Connected!"),a.forEach(n),this.h()},h(){p(e,"class","svelte-htd3yh")},m(i,a){h(i,e,a),y(e,l)},d(i){i&&n(e)}}}function C(c){let e,l;return{c(){e=f("h2"),l=u("Processing..."),this.h()},l(i){e=_(i,"H2",{class:!0});var a=d(e);l=m(a,"Processing..."),a.forEach(n),this.h()},h(){p(e,"class","svelte-htd3yh")},m(i,a){h(i,e,a),y(e,l)},d(i){i&&n(e)}}}function w(c){let e,l,i,a,o;return{c(){e=f("h2"),l=u("Something went very wrong! Please try again at later time."),i=b(),a=f("h2"),o=u("Redirecting back to home..."),this.h()},l(t){e=_(t,"H2",{class:!0});var s=d(e);l=m(s,"Something went very wrong! Please try again at later time."),s.forEach(n),i=g(t),a=_(t,"H2",{class:!0});var r=d(a);o=m(r,"Redirecting back to home..."),r.forEach(n),this.h()},h(){p(e,"class","svelte-htd3yh"),p(a,"class","svelte-htd3yh")},m(t,s){h(t,e,s),y(e,l),h(t,i,s),h(t,a,s),y(a,o)},d(t){t&&n(e),t&&n(i),t&&n(a)}}}function N(c){let e,l;function i(s,r){return s[0]?C:q}let a=i(c),o=a(c),t=c[1]&&w();return{c(){o.c(),e=b(),t&&t.c(),l=k()},l(s){o.l(s),e=g(s),t&&t.l(s),l=k()},m(s,r){o.m(s,r),h(s,e,r),t&&t.m(s,r),h(s,l,r)},p(s,[r]){a!==(a=i(s))&&(o.d(1),o=a(s),o&&(o.c(),o.m(e.parentNode,e))),s[1]?t||(t=w(),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:v,o:v,d(s){o.d(s),s&&n(e),t&&t.d(s),s&&n(l)}}}function A(c,e,l){let i;x(c,j,t=>l(2,i=t));let a=!0,o=!1;return E(async()=>{const t=i.query.get("code");i.query.get("state")===localStorage.getItem("state")?(await fetch("/api/oauth/auth",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({code:t})})).ok?(l(0,a=!1),window.location.href="/settings"):window.location.href="/":(l(1,o=!0),setTimeout(()=>{window.location.href="/"},5e3))}),[a,o]}class L extends S{constructor(e){super();H(this,e,A,N,P,{})}}export{L as default};
