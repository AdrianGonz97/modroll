import{P as Xe,C as ne,S as ce,i as ue,s as de,e as w,t as O,k as U,D as Ne,c as E,a as N,g as C,d as h,n as V,E as ke,b as u,Q as Pe,f as J,H as r,R as fe,T as W,h as X,U as Ue,I as Y,V as Ve,W as it,X as ct,J as L,Y as Le,F as ut,Z as dt,_ as Ie,z as ft,l as Ze,j as he,m as pe,o as _e,p as ht,q as pt,x as le,u as ae,v as me,r as _t,$ as mt,w as vt,a0 as gt,A as $e,a1 as xe,B as bt,a2 as yt,a3 as wt}from"../chunks/vendor-52449c46.js";import{a as et,b as tt,c as Et,d as Nt}from"../chunks/userstore-84659ed4.js";let Se=ne({name:"None",num:0}),qe=ne("None"),je=ne(["None","None"]),ze=ne(0),ge=ne(1),be=ne(50),kt=Xe([ge,be],([s,t])=>t-s+1);const It=Xe([ge,be],([s,t])=>{const e=[];for(let l=s;l<=t;l++){const i={num:l,name:""};e.push(i)}return e}),Z=ne(new Map);{const s=localStorage.getItem("userList"),t=new Map(JSON.parse(s));Z.set(t),Z.subscribe(e=>localStorage.userList=JSON.stringify(Array.from(e.entries())))}function St(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,v,b,M,P,g,D,I,m;return{c(){t=w("div"),e=w("div"),l=O(s[1]),i=U(),n=w("div"),o=w("button"),c=Ne("svg"),_=Ne("path"),a=U(),d=w("div"),f=w("div"),y=w("input"),v=U(),b=w("input"),M=U(),P=w("button"),g=Ne("svg"),D=Ne("path"),this.h()},l(k){t=E(k,"DIV",{class:!0});var T=N(t);e=E(T,"DIV",{});var q=N(e);l=C(q,s[1]),q.forEach(h),i=V(T),n=E(T,"DIV",{class:!0});var R=N(n);o=E(R,"BUTTON",{"aria-label":!0,class:!0});var K=N(o);c=ke(K,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var H=N(c);_=ke(H,"path",{d:!0,class:!0}),N(_).forEach(h),H.forEach(h),K.forEach(h),a=V(R),d=E(R,"DIV",{class:!0});var Q=N(d);f=E(Q,"DIV",{class:!0,style:!0});var j=N(f);y=E(j,"INPUT",{style:!0,"aria-hidden":!0,class:!0}),v=V(j),b=E(j,"INPUT",{type:!0,class:!0}),j.forEach(h),Q.forEach(h),M=V(R),P=E(R,"BUTTON",{"aria-label":!0,class:!0});var $=N(P);g=ke($,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var F=N(g);D=ke(F,"path",{d:!0,class:!0}),N(D).forEach(h),F.forEach(h),$.forEach(h),R.forEach(h),T.forEach(h),this.h()},h(){u(_,"d","M0,0.5 L1,0.5"),u(_,"class","svelte-1qdacbr"),u(c,"aria-hidden","true"),u(c,"viewBox","0 0 1 1"),u(c,"class","svelte-1qdacbr"),u(o,"aria-label","Decrease the counter by one"),u(o,"class","svelte-1qdacbr"),Pe(y,"top","-100%"),u(y,"aria-hidden","true"),y.value=p=Math.floor(s[2]+1),u(y,"class","svelte-1qdacbr"),u(b,"type","number"),u(b,"class","svelte-1qdacbr"),u(f,"class","counter-digits svelte-1qdacbr"),Pe(f,"transform","translate(0, "+100*s[4]+"%)"),u(d,"class","counter-viewport svelte-1qdacbr"),u(D,"d","M0,0.5 L1,0.5 M0.5,0 L0.5,1"),u(D,"class","svelte-1qdacbr"),u(g,"aria-hidden","true"),u(g,"viewBox","0 0 1 1"),u(g,"class","svelte-1qdacbr"),u(P,"aria-label","Increase the counter by one"),u(P,"class","svelte-1qdacbr"),u(n,"class","counter svelte-1qdacbr"),u(t,"class","container svelte-1qdacbr")},m(k,T){J(k,t,T),r(t,e),r(e,l),r(t,i),r(t,n),r(n,o),r(o,c),r(c,_),r(n,a),r(n,d),r(d,f),r(f,y),r(f,v),r(f,b),fe(b,s[3]),r(n,M),r(n,P),r(P,g),r(g,D),I||(m=[W(o,"click",s[6]),W(b,"input",s[7]),W(P,"click",s[8])],I=!0)},p(k,[T]){T&2&&X(l,k[1]),T&4&&p!==(p=Math.floor(k[2]+1))&&y.value!==p&&(y.value=p),T&8&&Ue(b.value)!==k[3]&&fe(b,k[3]),T&16&&Pe(f,"transform","translate(0, "+100*k[4]+"%)")},i:Y,o:Y,d(k){k&&h(t),I=!1,Ve(m)}}}function Mt(s,t){return s%t}function Tt(s){return s-1<1?1:--s}function Rt(s){return s+1>999?999:++s}function At(s,t,e){let l,i,n,o=Y,c=()=>(o(),o=it(_,v=>e(3,n=v)),_);s.$$.on_destroy.push(()=>o());let{count:_}=t;c();let{label:a}=t;const d=ct();L(s,d,v=>e(2,i=v));const f=()=>Le(_,n=Tt(n),n);function y(){n=Ue(this.value),_.set(n)}const p=()=>Le(_,n=Rt(n),n);return s.$$set=v=>{"count"in v&&c(e(0,_=v.count)),"label"in v&&e(1,a=v.label)},s.$$.update=()=>{s.$$.dirty&8&&d.set(n),s.$$.dirty&4&&e(4,l=Mt(i,1))},[_,a,i,n,l,d,f,y,p]}class st extends ce{constructor(t){super();ue(this,t,At,St,de,{count:0,label:1})}}function Ot(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,v,b,M,P=!0,g,D;return{c(){t=w("div"),e=w("button"),l=O("CLICK ME TO ROLL"),n=U(),o=w("div"),c=w("span"),_=O("Drum Volume: "),a=w("b"),d=O(s[1]),f=O("%"),y=U(),p=w("input"),v=U(),b=w("audio"),this.h()},l(I){t=E(I,"DIV",{class:!0});var m=N(t);e=E(m,"BUTTON",{class:!0});var k=N(e);l=C(k,"CLICK ME TO ROLL"),k.forEach(h),n=V(m),o=E(m,"DIV",{class:!0});var T=N(o);c=E(T,"SPAN",{});var q=N(c);_=C(q,"Drum Volume: "),a=E(q,"B",{class:!0});var R=N(a);d=C(R,s[1]),f=C(R,"%"),R.forEach(h),q.forEach(h),y=V(T),p=E(T,"INPUT",{type:!0,min:!0,max:!0,class:!0}),T.forEach(h),v=V(m),b=E(m,"AUDIO",{src:!0}),N(b).forEach(h),m.forEach(h),this.h()},h(){e.disabled=i=!s[2],u(e,"class","svelte-14x8rgv"),u(a,"class","svelte-14x8rgv"),u(p,"type","range"),u(p,"min","0"),u(p,"max","100"),u(p,"class","svelte-14x8rgv"),u(o,"class","volume-container svelte-14x8rgv"),ut(b.src,M="drumroll.mp3")||u(b,"src",M),u(t,"class","roll-container svelte-14x8rgv")},m(I,m){J(I,t,m),r(t,e),r(e,l),r(t,n),r(t,o),r(o,c),r(c,_),r(c,a),r(a,d),r(a,f),r(o,y),r(o,p),fe(p,s[1]),r(t,v),r(t,b),s[7](b),g||(D=[W(e,"click",s[3]),W(p,"change",s[5]),W(p,"input",s[5]),W(p,"change",s[4]),W(b,"play",s[6]),W(b,"pause",s[6])],g=!0)},p(I,[m]){m&4&&i!==(i=!I[2])&&(e.disabled=i),m&2&&X(d,I[1]),m&2&&fe(p,I[1]),m&4&&P!==(P=I[2])&&b[P?"pause":"play"]()},i:Y,o:Y,d(I){I&&h(t),s[7](null),g=!1,Ve(D)}}}function Ct(s,t,e){let l,i,n,o,c,_;L(s,je,g=>e(8,l=g)),L(s,qe,g=>e(9,i=g)),L(s,Z,g=>e(10,n=g)),L(s,ge,g=>e(11,o=g)),L(s,be,g=>e(12,c=g)),L(s,ze,g=>e(13,_=g));let a,d=50,f=!0;function y(){f&&(p(),a.play(),v(),Le(ze,_++,_),Se.set({name:"None",num:0}))}function p(){e(0,a.volume=d/100,a)}function v(){setTimeout(()=>{const g=Math.floor(Math.random()*(c-o+1)+o),D=n.get(g);D?(i!=D&&je.set([i,l[0]]),Se.set({name:D,num:g}),qe.set(D)):Se.set({name:"None",num:g}),console.log(`Winner: ${g} - ${D}`)},3200)}function b(){d=Ue(this.value),e(1,d)}function M(){f=this.paused,e(2,f)}function P(g){dt[g?"unshift":"push"](()=>{a=g,e(0,a)})}return[a,d,f,y,p,b,M,P]}class Bt extends ce{constructor(t){super();ue(this,t,Ct,Ot,de,{})}}function Dt(s){let t,e,l,i,n,o,c,_;return{c(){t=w("div"),e=w("span"),l=O(s[1]),i=U(),n=w("input"),this.h()},l(a){t=E(a,"DIV",{class:!0});var d=N(t);e=E(d,"SPAN",{class:!0});var f=N(e);l=C(f,s[1]),f.forEach(h),i=V(d),n=E(d,"INPUT",{"aria-label":!0,placeholder:!0,class:!0}),d.forEach(h),this.h()},h(){u(e,"class","svelte-1ytalfs"),u(n,"aria-label","Username"),u(n,"placeholder",""),u(n,"class","svelte-1ytalfs"),u(t,"class",o=""+(Ie(s[2].num===s[1]?"winner":"name-container")+" svelte-1ytalfs"))},m(a,d){J(a,t,d),r(t,e),r(e,l),r(t,i),r(t,n),fe(n,s[0]),c||(_=[W(n,"input",s[5]),W(n,"keydown",s[3])],c=!0)},p(a,[d]){d&2&&X(l,a[1]),d&1&&n.value!==a[0]&&fe(n,a[0]),d&6&&o!==(o=""+(Ie(a[2].num===a[1]?"winner":"name-container")+" svelte-1ytalfs"))&&u(t,"class",o)},i:Y,o:Y,d(a){a&&h(t),c=!1,Ve(_)}}}function Pt(s,t,e){let l,i;L(s,Z,a=>e(4,l=a)),L(s,Se,a=>e(2,i=a));let{num:n}=t,{name:o}=t;function c(a){(a.key==="Delete"||a.key==="Backspace")&&l.set(n,"")}ft(()=>{const a=l.get(n);a?e(0,o=a):Z.set(l.set(n,""))});function _(){o=this.value,e(0,o)}return s.$$set=a=>{"num"in a&&e(1,n=a.num),"name"in a&&e(0,o=a.name)},s.$$.update=()=>{s.$$.dirty&19&&o&&l.set(n,o)},[o,n,i,c,l,_]}class Ut extends ce{constructor(t){super();ue(this,t,Pt,Dt,de,{num:1,name:0})}}function nt(s,t,e){const l=s.slice();return l[10]=t[e],l}function lt(s,t,e){const l=s.slice();return l[13]=t[e],l}function at(s){let t,e,l=s[13]+"",i;return{c(){t=O("\xA0"),e=w("strong"),i=O(l),this.h()},l(n){t=C(n,"\xA0"),e=E(n,"STRONG",{class:!0});var o=N(e);i=C(o,l),o.forEach(h),this.h()},h(){u(e,"class","svelte-i420fk")},m(n,o){J(n,t,o),J(n,e,o),r(e,i)},p(n,o){o&8&&l!==(l=n[13]+"")&&X(i,l)},d(n){n&&h(t),n&&h(e)}}}function rt(s,t){let e,l,i;const n=[t[10]];let o={};for(let c=0;c<n.length;c+=1)o=bt(o,n[c]);return l=new Ut({props:o}),{key:s,first:null,c(){e=Ze(),he(l.$$.fragment),this.h()},l(c){e=Ze(),pe(l.$$.fragment,c),this.h()},h(){this.first=e},m(c,_){J(c,e,_),_e(l,c,_),i=!0},p(c,_){t=c;const a=_&64?ht(n,[pt(t[10])]):{};l.$set(a)},i(c){i||(le(l.$$.fragment,c),i=!0)},o(c){ae(l.$$.fragment,c),i=!1},d(c){c&&h(e),me(l,c)}}}function Vt(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,v,b,M,P,g,D,I,m,k,T,q,R,K,H,Q=s[4].join(", ")+"",j,$,F,ye,te,we,Me,Te,x,G=[],Je=new Map,ee,Re,Ge,re=s[3],z=[];for(let S=0;S<re.length;S+=1)z[S]=at(lt(s,re,S));let ve=s[6];const We=S=>S[10].num;for(let S=0;S<ve.length;S+=1){let B=nt(s,ve,S),A=We(B);Je.set(A,G[S]=rt(A,B))}return{c(){t=w("div"),e=w("div"),l=w("span"),i=O("Roll "),n=w("strong"),o=O("#"),c=O(s[1]),_=U(),a=w("span"),d=O("Current Mod: "),f=w("strong"),y=O(s[2]),p=U(),v=w("span"),b=O("Past Winners: [");for(let S=0;S<z.length;S+=1)z[S].c();M=O(`
			]`),P=U(),g=w("button"),D=O("Clear All"),I=U(),m=w("div"),k=w("span"),T=O("Enter with:"),q=U(),R=w("span"),K=O("Channel Reward: "),H=w("strong"),j=O(Q),$=U(),F=w("span"),ye=O("Bits (1 entry only): "),te=w("strong"),we=O(s[5]),Me=O(" bits"),Te=U(),x=w("div");for(let S=0;S<G.length;S+=1)G[S].c();this.h()},l(S){t=E(S,"DIV",{class:!0});var B=N(t);e=E(B,"DIV",{class:!0});var A=N(e);l=E(A,"SPAN",{class:!0});var oe=N(l);i=C(oe,"Roll "),n=E(oe,"STRONG",{class:!0});var Ae=N(n);o=C(Ae,"#"),c=C(Ae,s[1]),Ae.forEach(h),oe.forEach(h),_=V(A),a=E(A,"SPAN",{class:!0});var Oe=N(a);d=C(Oe,"Current Mod: "),f=E(Oe,"STRONG",{class:!0});var He=N(f);y=C(He,s[2]),He.forEach(h),Oe.forEach(h),p=V(A),v=E(A,"SPAN",{class:!0});var Ee=N(v);b=C(Ee,"Past Winners: [");for(let se=0;se<z.length;se+=1)z[se].l(Ee);M=C(Ee,`
			]`),Ee.forEach(h),P=V(A),g=E(A,"BUTTON",{class:!0});var Ye=N(g);D=C(Ye,"Clear All"),Ye.forEach(h),I=V(A),m=E(A,"DIV",{class:!0});var ie=N(m);k=E(ie,"SPAN",{class:!0});var Ke=N(k);T=C(Ke,"Enter with:"),Ke.forEach(h),q=V(ie),R=E(ie,"SPAN",{class:!0});var Ce=N(R);K=C(Ce,"Channel Reward: "),H=E(Ce,"STRONG",{class:!0});var Fe=N(H);j=C(Fe,Q),Fe.forEach(h),Ce.forEach(h),$=V(ie),F=E(ie,"SPAN",{class:!0});var Be=N(F);ye=C(Be,"Bits (1 entry only): "),te=E(Be,"STRONG",{class:!0});var De=N(te);we=C(De,s[5]),Me=C(De," bits"),De.forEach(h),Be.forEach(h),ie.forEach(h),A.forEach(h),Te=V(B),x=E(B,"DIV",{class:!0,style:!0});var Qe=N(x);for(let se=0;se<G.length;se+=1)G[se].l(Qe);Qe.forEach(h),B.forEach(h),this.h()},h(){u(n,"class","svelte-i420fk"),u(l,"class","svelte-i420fk"),u(f,"class","svelte-i420fk"),u(a,"class","svelte-i420fk"),u(v,"class","svelte-i420fk"),u(g,"class","clear svelte-i420fk"),u(k,"class","tit svelte-i420fk"),u(H,"class","svelte-i420fk"),u(R,"class","instructions svelte-i420fk"),u(te,"class","svelte-i420fk"),u(F,"class","instructions svelte-i420fk"),u(m,"class","how svelte-i420fk"),u(e,"class","stats svelte-i420fk"),u(x,"class","con svelte-i420fk"),u(x,"style",s[0]),u(t,"class","container svelte-i420fk")},m(S,B){J(S,t,B),r(t,e),r(e,l),r(l,i),r(l,n),r(n,o),r(n,c),r(e,_),r(e,a),r(a,d),r(a,f),r(f,y),r(e,p),r(e,v),r(v,b);for(let A=0;A<z.length;A+=1)z[A].m(v,null);r(v,M),r(e,P),r(e,g),r(g,D),r(e,I),r(e,m),r(m,k),r(k,T),r(m,q),r(m,R),r(R,K),r(R,H),r(H,j),r(m,$),r(m,F),r(F,ye),r(F,te),r(te,we),r(te,Me),r(t,Te),r(t,x);for(let A=0;A<G.length;A+=1)G[A].m(x,null);ee=!0,Re||(Ge=W(g,"click",Lt),Re=!0)},p(S,[B]){if((!ee||B&2)&&X(c,S[1]),(!ee||B&4)&&X(y,S[2]),B&8){re=S[3];let A;for(A=0;A<re.length;A+=1){const oe=lt(S,re,A);z[A]?z[A].p(oe,B):(z[A]=at(oe),z[A].c(),z[A].m(v,M))}for(;A<z.length;A+=1)z[A].d(1);z.length=re.length}(!ee||B&16)&&Q!==(Q=S[4].join(", ")+"")&&X(j,Q),(!ee||B&32)&&X(we,S[5]),B&64&&(ve=S[6],_t(),G=mt(G,B,We,1,S,ve,Je,x,yt,rt,null,nt),vt()),(!ee||B&1)&&u(x,"style",S[0])},i(S){if(!ee){for(let B=0;B<ve.length;B+=1)le(G[B]);ee=!0}},o(S){for(let B=0;B<G.length;B+=1)ae(G[B]);ee=!1},d(S){S&&h(t),gt(z,S);for(let B=0;B<G.length;B+=1)G[B].d();Re=!1,Ge()}}}function Lt(){confirm("Are you really sure you want to clear ALL the NAMES?")&&confirm("OK, yeah. But seriously though, ARE YOU REALLY SURE?")&&(console.log("Clearing all names"),localStorage.removeItem("userList"),window.location.reload())}function qt(s,t,e){let l,i,n,o,c,_,a,d;L(s,kt,p=>e(7,l=p)),L(s,Z,p=>e(9,i=p)),L(s,ze,p=>e(1,n=p)),L(s,qe,p=>e(2,o=p)),L(s,je,p=>e(3,c=p)),L(s,et,p=>e(4,_=p)),L(s,tt,p=>e(5,a=p)),L(s,It,p=>e(6,d=p));let f;$e(()=>{f=setInterval(()=>{Z.set(i)},5e3)}),xe(()=>{clearInterval(f)});let y="";return s.$$.update=()=>{if(s.$$.dirty&128){const p=Math.ceil(l/5),v=Math.ceil(l/3);e(0,y=`--rows-lg: ${p}; --rows-md: ${v};`)}},[y,n,o,c,_,a,d,l]}class jt extends ce{constructor(t){super();ue(this,t,qt,Vt,de,{})}}function zt(s){let t,e,l,i;return{c(){t=w("button"),e=O("Start"),this.h()},l(n){t=E(n,"BUTTON",{class:!0});var o=N(t);e=C(o,"Start"),o.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(n,o){J(n,t,o),r(t,e),l||(i=W(t,"click",s[3]),l=!0)},p:Y,d(n){n&&h(t),l=!1,i()}}}function Jt(s){let t,e,l,i;return{c(){t=w("button"),e=O("Stop"),this.h()},l(n){t=E(n,"BUTTON",{class:!0});var o=N(t);e=C(o,"Stop"),o.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(n,o){J(n,t,o),r(t,e),l||(i=W(t,"click",s[4]),l=!0)},p:Y,d(n){n&&h(t),l=!1,i()}}}function ot(s){let t,e,l,i,n,o,c,_=(s[0]===-1||s[0]===null?"No active":s[0])+"",a,d,f;function y(b,M){return b[1].length===0?Wt:Gt}let p=y(s),v=p(s);return{c(){t=w("div"),e=w("span"),l=O(`Reward Name:
				`),v.c(),i=U(),n=w("span"),o=O("Bit Amount: "),c=w("b"),a=O(_),d=O(" bits"),this.h()},l(b){t=E(b,"DIV",{class:!0});var M=N(t);e=E(M,"SPAN",{class:!0});var P=N(e);l=C(P,`Reward Name:
				`),v.l(P),P.forEach(h),i=V(M),n=E(M,"SPAN",{class:!0});var g=N(n);o=C(g,"Bit Amount: "),c=E(g,"B",{class:!0});var D=N(c);a=C(D,_),d=C(D," bits"),D.forEach(h),g.forEach(h),M.forEach(h),this.h()},h(){u(e,"class","txt svelte-zmiphn"),u(c,"class",f=""+(Ie(s[0]===-1||s[0]===null?"inactive":"")+" svelte-zmiphn")),u(n,"class","txt svelte-zmiphn"),u(t,"class","watching-text svelte-zmiphn")},m(b,M){J(b,t,M),r(t,e),r(e,l),v.m(e,null),r(t,i),r(t,n),r(n,o),r(n,c),r(c,a),r(c,d)},p(b,M){p===(p=y(b))&&v?v.p(b,M):(v.d(1),v=p(b),v&&(v.c(),v.m(e,null))),M&1&&_!==(_=(b[0]===-1||b[0]===null?"No active":b[0])+"")&&X(a,_),M&1&&f!==(f=""+(Ie(b[0]===-1||b[0]===null?"inactive":"")+" svelte-zmiphn"))&&u(c,"class",f)},d(b){b&&h(t),v.d()}}}function Gt(s){let t,e=s[1].join(", ")+"",l;return{c(){t=w("b"),l=O(e),this.h()},l(i){t=E(i,"B",{class:!0});var n=N(t);l=C(n,e),n.forEach(h),this.h()},h(){u(t,"class","svelte-zmiphn")},m(i,n){J(i,t,n),r(t,l)},p(i,n){n&2&&e!==(e=i[1].join(", ")+"")&&X(l,e)},d(i){i&&h(t)}}}function Wt(s){let t,e;return{c(){t=w("b"),e=O("No active rewards"),this.h()},l(l){t=E(l,"B",{class:!0});var i=N(t);e=C(i,"No active rewards"),i.forEach(h),this.h()},h(){u(t,"class","inactive svelte-zmiphn")},m(l,i){J(l,t,i),r(t,e)},p:Y,d(l){l&&h(t)}}}function Ht(s){let t,e,l,i,n,o;function c(f,y){return f[2]?Jt:zt}let _=c(s),a=_(s),d=s[2]&&ot(s);return{c(){t=w("div"),e=w("div"),l=w("span"),i=O("Automate Modroll:"),n=U(),a.c(),o=U(),d&&d.c(),this.h()},l(f){t=E(f,"DIV",{class:!0});var y=N(t);e=E(y,"DIV",{class:!0});var p=N(e);l=E(p,"SPAN",{class:!0});var v=N(l);i=C(v,"Automate Modroll:"),v.forEach(h),n=V(p),a.l(p),p.forEach(h),o=V(y),d&&d.l(y),y.forEach(h),this.h()},h(){u(l,"class","svelte-zmiphn"),u(e,"class","btn-con svelte-zmiphn"),u(t,"class","container svelte-zmiphn")},m(f,y){J(f,t,y),r(t,e),r(e,l),r(l,i),r(e,n),a.m(e,null),r(t,o),d&&d.m(t,null)},p(f,[y]){_===(_=c(f))&&a?a.p(f,y):(a.d(1),a=_(f),a&&(a.c(),a.m(e,null))),f[2]?d?d.p(f,y):(d=ot(f),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i:Y,o:Y,d(f){f&&h(t),a.d(),d&&d.d()}}}async function Yt(s,t){(await fetch("/api/reward/refund",{method:"POST",body:JSON.stringify({id:s,rewardId:t})})).ok&&console.log("User has had their points refunded")}function Kt(s,t,e){let l,i,n,o,c,_;L(s,Z,m=>e(13,l=m)),L(s,be,m=>e(14,i=m)),L(s,ge,m=>e(15,n=m)),L(s,tt,m=>e(0,o=m)),L(s,Et,m=>e(5,c=m)),L(s,et,m=>e(1,_=m));let a,d,f,y,p,v,b,M=!1;$e(async()=>{try{const k=await(await fetch("/api/pubsub")).json();d=k.userId,f=k.token,d&&f&&(M=!0,y="wss://pubsub-edge.twitch.tv",p=[`channel-bits-events-v2.${d}`,`channel-points-channel-v1.${d}`])}catch(m){console.log(m)}});async function P(){M||(alert("You must connect a twitch account before using this feature! This can be done in the settings page."),window.location.href="/settings");try{const m=await fetch("/api/reward/get");if(m.ok){const k=await m.json();console.log(k),Nt.set(k.rewards.filter(T=>T.isActive))}}catch{console.log("Cannot get user rewards")}e(2,a=new WebSocket(y)),e(2,a.onopen=m=>{const k={type:"LISTEN",data:{topics:p,auth_token:f}};a.send(JSON.stringify(k)),console.log("ws connected!"),v=g(a)},a),e(2,a.onmessage=m=>{const k=JSON.parse(m.data);if(console.log(k),k.type==="PONG")clearTimeout(b),v=g(a);else if(k.type==="MESSAGE"){const T=JSON.parse(k.data.message);if(console.log(T),T.type==="reward-redeemed"){const q=T.data.redemption.user.display_name,R=T.data.redemption.user_input,K=T.data.redemption.reward.id,H=T.data.redemption.id,Q=j=>j===K;c.some(Q)&&(!isNaN(R)&&parseInt(R)>=n&&parseInt(R)<=i&&l.get(parseInt(R))===""?(console.log(`Setting user ${q} to number ${R}`),Z.set(l.set(parseInt(R),q))):(console.log(`User ${q} input: ${R} is invalid. Refunding.`),Yt(H,K)))}else if(T.message_type==="bits_event"){const{user_name:q,bits_used:R,chat_message:K}=T.data;console.log(T.data),console.log(q,R,K);const H=/([^ "]*\Cheer[^ "]*)/g,j=K.replace(H,"").replace(/\s/g,"");let $=!1;l.forEach((F,ye,te)=>{F===q+"-"&&($=!0)}),o!==null&&o!==-1&&R>=o&&!isNaN(j)&&parseInt(j)>=n&&parseInt(j)<=i&&l.get(parseInt(j))===""&&!$?Z.set(l.set(parseInt(j),q+"-")):console.log("User input is invalid")}}},a),e(2,a.onerror=m=>{console.error("An error has occurred: ",m)},a),e(2,a.onclose=m=>{console.log("WS is now closed")},a)}function g(m){return setTimeout(()=>{const k={type:"PING"};m.send(JSON.stringify(k)),b=setTimeout(()=>{D()},1e4)},1e3*60*1+Math.floor(Math.random()*1e3*60*3))}function D(){console.log("Reconnecting ws...");const m={type:"RECONNECT"};a.send(JSON.stringify(m))}function I(){a.close(),clearTimeout(v),clearTimeout(b),e(2,a=null)}return xe(()=>{a&&a.close(),clearTimeout(v),clearTimeout(b)}),s.$$.update=()=>{s.$$.dirty&35&&console.log(_,c,o)},[o,_,a,P,I,c]}class Ft extends ce{constructor(t){super();ue(this,t,Kt,Ht,de,{})}}function Qt(s){let t,e,l,i,n,o,c,_,a,d,f,y,p,v,b,M,P,g,D;return o=new Ft({}),y=new st({props:{count:ge,label:"Min Number"}}),v=new st({props:{count:be,label:"Max Number"}}),M=new Bt({}),g=new jt({}),{c(){t=U(),e=w("section"),l=w("h1"),i=O("Rolly for Le Mod"),n=U(),he(o.$$.fragment),c=U(),_=w("h2"),a=O("Edit the numbers below to adjust the quantity"),d=U(),f=w("div"),he(y.$$.fragment),p=U(),he(v.$$.fragment),b=U(),he(M.$$.fragment),P=U(),he(g.$$.fragment),this.h()},l(I){wt('[data-svelte="svelte-1anpopb"]',document.head).forEach(h),t=V(I),e=E(I,"SECTION",{class:!0});var k=N(e);l=E(k,"H1",{class:!0});var T=N(l);i=C(T,"Rolly for Le Mod"),T.forEach(h),n=V(k),pe(o.$$.fragment,k),c=V(k),_=E(k,"H2",{class:!0});var q=N(_);a=C(q,"Edit the numbers below to adjust the quantity"),q.forEach(h),d=V(k),f=E(k,"DIV",{class:!0});var R=N(f);pe(y.$$.fragment,R),p=V(R),pe(v.$$.fragment,R),R.forEach(h),b=V(k),pe(M.$$.fragment,k),P=V(k),pe(g.$$.fragment,k),k.forEach(h),this.h()},h(){document.title="Home",u(l,"class","svelte-1ibeh9m"),u(_,"class","svelte-1ibeh9m"),u(f,"class","counters svelte-1ibeh9m"),u(e,"class","svelte-1ibeh9m")},m(I,m){J(I,t,m),J(I,e,m),r(e,l),r(l,i),r(e,n),_e(o,e,null),r(e,c),r(e,_),r(_,a),r(e,d),r(e,f),_e(y,f,null),r(f,p),_e(v,f,null),r(e,b),_e(M,e,null),r(e,P),_e(g,e,null),D=!0},p:Y,i(I){D||(le(o.$$.fragment,I),le(y.$$.fragment,I),le(v.$$.fragment,I),le(M.$$.fragment,I),le(g.$$.fragment,I),D=!0)},o(I){ae(o.$$.fragment,I),ae(y.$$.fragment,I),ae(v.$$.fragment,I),ae(M.$$.fragment,I),ae(g.$$.fragment,I),D=!1},d(I){I&&h(t),I&&h(e),me(o),me(y),me(v),me(M),me(g)}}}const $t=!0;class xt extends ce{constructor(t){super();ue(this,t,null,Qt,de,{})}}export{xt as default,$t as prerender};
